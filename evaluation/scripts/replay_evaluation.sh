## run_complete_evaluation.sh
# CAUTION
# Run this script within its folder. Otherwise the paths might be wrong!
#####################################
# chmod +x run_complete_evaluation.sh
# ./run_complete_evaluation.sh
#

trap "exit" INT

#####################

echo "Run quantification evaluation..."

number_of_runs=30 # 30 repetitions
number_of_seeds=5 # every 30 seconds
time_bound=1800 # 1800sec = 30min
step_size_eval=3 # every 30 seconds

workingPath="/Users/yannic/experiments/qfuzz-new-results/"

declare -a subjects=(
#"apache_ftpserver_clear_safe_KDynamic"
#"apache_ftpserver_clear_safe_KGreedy"
#"apache_ftpserver_clear_unsafe_KDynamic"
#"apache_ftpserver_clear_unsafe_KGreedy"
#"apache_ftpserver_md5_safe_KDynamic"
#"apache_ftpserver_md5_unsafe_KDynamic"
#"apache_ftpserver_md5_unsafe_KGreedy"
#"apache_ftpserver_salted_encrypt_unsafe_KGreedy"
#"apache_ftpserver_salted_safe_KDynamic"
#"apache_ftpserver_salted_safe_KGreedy"
#"apache_ftpserver_salted_unsafe_KDynamic"
#"apache_ftpserver_salted_unsafe_KGreedy"
#"apache_ftpserver_stringutils_safe_KGreedy"
#"apache_ftpserver_stringutils_unsafe_KGreedy"
#"blazer_array_safe_KDynamic"
#"blazer_array_safe_KGreedy"
#"blazer_array_unsafe_KDynamic"
#"blazer_array_unsafe_KGreedy"
#"blazer_gpt14_safe_KDynamic"
#"blazer_gpt14_safe_KGreedy"
#"blazer_gpt14_unsafe_KDynamic"
#"blazer_gpt14_unsafe_KGreedy"
#"blazer_k96_safe_KDynamic"
#"blazer_k96_safe_KGreedy"
#"blazer_k96_unsafe_KDynamic"
#"blazer_k96_unsafe_KGreedy"
#"blazer_loopandbranch_safe_KDynamic_k10"
#"blazer_loopandbranch_safe_KDynamic_k20"
#"blazer_loopandbranch_safe_KGreedy_k10"
#"blazer_loopandbranch_safe_KGreedy_k20"
#"blazer_loopandbranch_unsafe_KDynamic_k10"
#"blazer_loopandbranch_unsafe_KDynamic_k20"
#"blazer_loopandbranch_unsafe_KGreedy_k10"
#"blazer_loopandbranch_unsafe_KGreedy_k20"
#"blazer_modpow1_safe_KDynamic"
#"blazer_modpow1_safe_KGreedy"
#"blazer_modpow1_unsafe_KDynamic"
#"blazer_modpow1_unsafe_KGreedy"
#"blazer_modpow2_safe_KDynamic"
#"blazer_modpow2_safe_KGreedy"
#"blazer_modpow2_unsafe_KDynamic"
#"blazer_modpow2_unsafe_KGreedy"
#"blazer_passwordEq_safe_KDynamic"
#"blazer_passwordEq_safe_KGreedy"
#"blazer_passwordEq_unsafe_KDynamic"
#"blazer_passwordEq_unsafe_KGreedy"
#"blazer_sanity_safe_KDynamic_k10"
#"blazer_sanity_safe_KDynamic_k20"
#"blazer_sanity_safe_KGreedy_k10"
#"blazer_sanity_safe_KGreedy_k20"
#"blazer_sanity_unsafe_KDynamic_k10"
#"blazer_sanity_unsafe_KDynamic_k20"
#"blazer_sanity_unsafe_KGreedy_k10"
#"blazer_sanity_unsafe_KGreedy_k20"
#"blazer_straightline_safe_KDynamic"
#"blazer_straightline_safe_KGreedy"
#"blazer_straightline_unsafe_KDynamic"
#"blazer_straightline_unsafe_KGreedy"
#"blazer_unixlogin_safe_KDynamic_k2"
#"blazer_unixlogin_safe_KGreedy_k2"
#"blazer_unixlogin_unsafe_KDynamic_k2"
#"blazer_unixlogin_unsafe_KGreedy_k2"
#"blazer_unixlogin_unsafe_KGreedy_k3"
#"Eclipse_jetty_2_KDynamic_eps1"
#"Eclipse_jetty_2_KDynamic_eps4"
#"Eclipse_jetty_2_KGreedy_eps1"
#"Eclipse_jetty_2_KGreedy_eps4"
#"Eclipse_jetty_3_KDynamic_eps1"
#"Eclipse_jetty_3_KDynamic_eps4"
#"Eclipse_jetty_3_KGreedy_eps1"
#"Eclipse_jetty_3_KGreedy_eps4"
#"Eclipse_jetty_4_KDynamic_eps1"
#"Eclipse_jetty_4_KDynamic_eps4"
#"Eclipse_jetty_4_KGreedy_eps1"
#"Eclipse_jetty_4_KGreedy_eps4"
#"github_authmreloaded_safe_KDynamic"
#"github_authmreloaded_safe_KGreedy"
#"github_authmreloaded_unsafe_KDynamic"
#"github_authmreloaded_unsafe_KGreedy"
#"leaksn1b-0_KGreedy"
#"leaksn1b-1_KDynamic"
#"leaksn1b-1_KGreedy"
#"leaksn1b-2_KDynamic"
#"leaksn1b-2_KGreedy"
#"leaksn1b-3_KDynamic"
#"leaksn1b-3_KGreedy"
#"leaksn1b-4_KDynamic"
#"leaksn1b-4_KGreedy"
#"leaksn1b-5_KDynamic"
#"leaksn1b-5_KGreedy"
#"rsa_modpow_1717_bitlength_6_KDynamic"
#"rsa_modpow_1717_bitlength_6_KGreedy"
#"rsa_modpow_1717_bitlength_7_KDynamic"
#"rsa_modpow_1717_bitlength_7_KGreedy"
#"rsa_modpow_1717_bitlength_8_KDynamic"
#"rsa_modpow_1717_bitlength_8_KGreedy"
#"rsa_modpow_1717_KDynamic"
#"rsa_modpow_1717_KGreedy"
#"rsa_modpow_834443_bitlength_7_KDynamic"
#"rsa_modpow_834443_bitlength_7_KGreedy"
#"rsa_modpow_834443_bitlength_8_KDynamic"
#"rsa_modpow_834443_bitlength_8_KGreedy"
#"rsa_modpow_834443_KDynamic"
#"rsa_modpow_834443_KGreedy"
#"rsa_modpow_1964903306_bitlength_6_KDynamic"
#"rsa_modpow_1964903306_bitlength_6_KGreedy"
#"rsa_modpow_1964903306_bitlength_7_KGreedy"
#"rsa_modpow_1964903306_KDynamic"
#"rsa_modpow_1964903306_KGreedy"
#"stac_crime_unsafe_KDynamic"
#"stac_crime_unsafe_KGreedy"
#"stac_ibasys_unsafe_KGreedy"
#"themis_boot-stateless-auth_safe_KDynamic"
#"themis_boot-stateless-auth_safe_KGreedy"
#"themis_boot-stateless-auth_unsafe_KDynamic"
#"themis_boot-stateless-auth_unsafe_KGreedy"
#"themis_dynatable_unsafe_KDynamic"
#"themis_dynatable_unsafe_KGreedy"
#"themis_GWT_advanced_table_unsafe_KDynamic"
#"themis_GWT_advanced_table_unsafe_KGreedy"
#"themis_jdk_safe_KDynamic"
#"themis_jdk_safe_KGreedy"
#"themis_jdk_unsafe_KDynamic"
#"themis_jdk_unsafe_KGreedy"
#"themis_oacc_unsafe_KDynamic"
#"themis_oacc_unsafe_KGreedy"
#"themis_openmrs-core_unsafe_KDynamic"
#"themis_openmrs-core_unsafe_KGreedy"
#"themis_orientdb_safe_KDynamic"
#"themis_orientdb_safe_KGreedy"
#"themis_orientdb_unsafe_KDynamic"
#"themis_orientdb_unsafe_KGreedy"
#"themis_pac4j_unsafe_KDynamic"
#"themis_pac4j_unsafe_KGreedy"
#"themis_picketbox_safe_KDynamic"
#"themis_picketbox_safe_KGreedy"
#"themis_picketbox_unsafe_KDynamic"
#"themis_picketbox_unsafe_KGreedy"
#"themis_spring-security_safe_KDynamic"
#"themis_spring-security_safe_KGreedy"
#"themis_spring-security_unsafe_KDynamic"
#"themis_spring-security_unsafe_KGreedy"
#"themis_tomcat_safe_KDynamic"
#"themis_tomcat_safe_KGreedy"
#"themis_tomcat_unsafe_KDynamic"
#"themis_tomcat_unsafe_KGreedy"
#"themis_tourplanner_safe_KDynamic"
#"themis_tourplanner_safe_KGreedy"
#"themis_tourplanner_unsafe_KDynamic"
#"themis_tourplanner_unsafe_KGreedy"
#"apache_wss4j_KDynamic"
#"apache_wss4j_KGreedy"
#"blazer_passwordEq_unsafe_1"
#"blazer_passwordEq_unsafe_2"
#"blazer_passwordEq_unsafe_3"
#"blazer_passwordEq_unsafe_4"
#"blazer_passwordEq_unsafe_5"
#"Eclipse_jetty_2_1"
#"Eclipse_jetty_2_2"
#"Eclipse_jetty_2_3"
#"Eclipse_jetty_2_4"
#"Eclipse_jetty_2_5"
#"Eclipse_jetty_2_eps1_KDynamic_1"
#"Eclipse_jetty_2_eps1_KDynamic_2"
#"Eclipse_jetty_2_eps1_KDynamic_3"
#"Eclipse_jetty_2_eps1_KDynamic_4"
#"Eclipse_jetty_2_eps1_KDynamic_5"
#"Eclipse_jetty_2_eps4_KGreedy_1"
#"Eclipse_jetty_2_eps4_KGreedy_2"
#"Eclipse_jetty_2_eps4_KGreedy_3"
#"Eclipse_jetty_2_eps4_KGreedy_4"
#"Eclipse_jetty_2_eps4_KGreedy_5"
#"Eclipse_jetty_2_eps4_KDynamic_1"
#"Eclipse_jetty_2_eps4_KDynamic_2"
#"Eclipse_jetty_2_eps4_KDynamic_3"
#"Eclipse_jetty_2_eps4_KDynamic_4"
#"Eclipse_jetty_2_eps4_KDynamic_5"
#"Eclipse_jetty_3_eps1_KDynamic_1"
#"Eclipse_jetty_3_eps1_KDynamic_2"
#"Eclipse_jetty_3_eps1_KDynamic_3"
#"Eclipse_jetty_3_eps1_KDynamic_4"
#"Eclipse_jetty_3_eps1_KDynamic_5"
#"Eclipse_jetty_3_eps1_KGreedy_1"
#"Eclipse_jetty_3_eps1_KGreedy_2"
#"Eclipse_jetty_3_eps1_KGreedy_3"
#"Eclipse_jetty_3_eps1_KGreedy_4"
#"Eclipse_jetty_3_eps1_KGreedy_5"
#"Eclipse_jetty_3_eps4_KDynamic_1"
#"Eclipse_jetty_3_eps4_KDynamic_2"
#"Eclipse_jetty_3_eps4_KDynamic_3"
#"Eclipse_jetty_3_eps4_KDynamic_4"
#"Eclipse_jetty_3_eps4_KDynamic_5"
#"Eclipse_jetty_3_eps4_KGreedy_1"
#"Eclipse_jetty_3_eps4_KGreedy_2"
#"Eclipse_jetty_3_eps4_KGreedy_3"
#"Eclipse_jetty_3_eps4_KGreedy_4"
#"Eclipse_jetty_3_eps4_KGreedy_5"
#"Eclipse_jetty_4_eps1_KDynamic_1"
#"Eclipse_jetty_4_eps1_KDynamic_2"
#"Eclipse_jetty_4_eps1_KDynamic_3"
#"Eclipse_jetty_4_eps1_KDynamic_4"
#"Eclipse_jetty_4_eps1_KDynamic_5"
#"Eclipse_jetty_4_eps1_KGreedy_1"
#"Eclipse_jetty_4_eps1_KGreedy_2"
#"Eclipse_jetty_4_eps1_KGreedy_3"
#"Eclipse_jetty_4_eps1_KGreedy_4"
#"Eclipse_jetty_4_eps1_KGreedy_5"
#"Eclipse_jetty_4_eps4_KGreedy_1"
#"Eclipse_jetty_4_eps4_KGreedy_2"
#"Eclipse_jetty_4_eps4_KGreedy_3"
#"Eclipse_jetty_4_eps4_KGreedy_4"
#"Eclipse_jetty_4_eps4_KGreedy_5"
#"Eclipse_jetty_4_eps4_KDynamic_1"
#"Eclipse_jetty_4_eps4_KDynamic_2"
#"Eclipse_jetty_4_eps4_KDynamic_3"
#"Eclipse_jetty_4_eps4_KDynamic_4"
#"Eclipse_jetty_4_eps4_KDynamic_5"
#"apache_wss4j_KGreedy_5"
#"apache_wss4j_KGreedy_4"
#"apache_wss4j_KGreedy_3"
#"apache_wss4j_KGreedy_2"
#"apache_wss4j_KGreedy_1"
#"apache_wss4j_KDynamic_1"
#"apache_wss4j_KDynamic_2"
#"apache_wss4j_KDynamic_3"
#"apache_wss4j_KDynamic_4"
#"apache_wss4j_KDynamic_5"
#"apache_wss4j"
#"Eclipse_jetty_2_eps1"
#"Eclipse_jetty_2_eps4"
#"Eclipse_jetty_3_eps1"
#"Eclipse_jetty_3_eps4"
#"Eclipse_jetty_4_eps1"
#"Eclipse_jetty_4_eps4"
#"blazer_passwordEq_unsafe_KGreedy"
#"Eclipse_jetty_5_eps1_KGreedy_5"
#"Eclipse_jetty_5_eps1_KGreedy_1"
#"Eclipse_jetty_5_eps1_KGreedy_2"
#"Eclipse_jetty_5_eps1_KGreedy_3"
#"Eclipse_jetty_5_eps1_KGreedy_4"
#"Eclipse_jetty_5_eps1_KDynamic_1"
#"Eclipse_jetty_5_eps1_KDynamic_2"
#"Eclipse_jetty_5_eps1_KDynamic_3"
#"Eclipse_jetty_5_eps1_KDynamic_4"
#"Eclipse_jetty_5_eps1_KDynamic_5"
#"Eclipse_jetty_5_eps4_KGreedy_5"
#"Eclipse_jetty_5_eps4_KGreedy_1"
#"Eclipse_jetty_5_eps4_KGreedy_2"
#"Eclipse_jetty_5_eps4_KGreedy_3"
#"Eclipse_jetty_5_eps4_KGreedy_4"
#"Eclipse_jetty_5_eps4_KDynamic_1"
#"Eclipse_jetty_5_eps4_KDynamic_2"
#"Eclipse_jetty_5_eps4_KDynamic_3"
#"Eclipse_jetty_5_eps4_KDynamic_4"
#"Eclipse_jetty_5_eps4_KDynamic_5"
#"Eclipse_jetty_1_eps1_KGreedy_5"
#"Eclipse_jetty_1_eps1_KGreedy_1"
#"Eclipse_jetty_1_eps1_KGreedy_2"
#"Eclipse_jetty_1_eps1_KGreedy_3"
#"Eclipse_jetty_1_eps1_KGreedy_4"
#"Eclipse_jetty_1_eps1_KDynamic_1"
#"Eclipse_jetty_1_eps1_KDynamic_2"
#"Eclipse_jetty_1_eps1_KDynamic_3"
#"Eclipse_jetty_1_eps1_KDynamic_4"
#"Eclipse_jetty_1_eps1_KDynamic_5"
#"Eclipse_jetty_1_eps4_KGreedy_1"
#"Eclipse_jetty_1_eps4_KGreedy_2"
#"Eclipse_jetty_1_eps4_KGreedy_3"
#"Eclipse_jetty_1_eps4_KGreedy_4"
#"Eclipse_jetty_1_eps4_KGreedy_5"
#"Eclipse_jetty_5_eps1"
#"Eclipse_jetty_5_eps4"
#"Eclipse_jetty_1_eps1"
#"Eclipse_jetty_1_eps4"
#"Eclipse_jetty_1_eps4_KDynamic_1"
#"Eclipse_jetty_1_eps4_KDynamic_2"
#"Eclipse_jetty_1_eps4_KDynamic_3"
#"Eclipse_jetty_1_eps4_KDynamic_4"
#"Eclipse_jetty_1_eps4_KDynamic_5"
#"rsa_modpow_1717_bitlength_3_count"
#"rsa_modpow_1717_bitlength_4_count"
#"rsa_modpow_1717_bitlength_5_count"
#"rsa_modpow_1717_bitlength_9_count"
#"rsa_modpow_1717_bitlength_10_count"
#"rsa_modpow_1717_bitlength_11_count"
#"rsa_modpow_1717_bitlength_12_count"
#"rsa_modpow_1717_bitlength_13_count"
#"rsa_modpow_1717_bitlength_14_count"
#"rsa_modpow_834443_bitlength_3_count"
#"rsa_modpow_834443_bitlength_4_count"
#"rsa_modpow_834443_bitlength_5_count"
#"rsa_modpow_834443_bitlength_6_count"
#"rsa_modpow_834443_bitlength_9_count"
#"rsa_modpow_834443_bitlength_10_count"
#"rsa_modpow_834443_bitlength_11_count"
#"rsa_modpow_834443_bitlength_12_count"
#"rsa_modpow_834443_bitlength_13_count"
#"rsa_modpow_834443_bitlength_14_count"
#"rsa_modpow_1964903306_bitlength_3_count"
#"rsa_modpow_1964903306_bitlength_4_count"
#"rsa_modpow_1964903306_bitlength_5_count"
#"rsa_modpow_1964903306_bitlength_8_count"
#"rsa_modpow_1964903306_bitlength_9_count"
#"rsa_modpow_1964903306_bitlength_10_count"
#"rsa_modpow_1964903306_bitlength_11_count"
#"rsa_modpow_1964903306_bitlength_12_count"
#"rsa_modpow_1964903306_bitlength_13_count"
#"rsa_modpow_1964903306_bitlength_14_count"
#"Eclipse_jetty_4_eps0_KGreedy_1"
#"Eclipse_jetty_4_eps0_KGreedy_2"
#"Eclipse_jetty_4_eps0_KGreedy_3"
#"Eclipse_jetty_4_eps0_KGreedy_4"
#"Eclipse_jetty_4_eps0_KGreedy_5"
#"Eclipse_jetty_4_eps0_KGreedy"
#"leaksn1b-1_KGreedy_1"
#"leaksn1b-1_KGreedy_2"
#"leaksn1b-1_KGreedy_3"
#"leaksn1b-1_KGreedy_4"
#"leaksn1b-1_KGreedy_5"
#"leaksn1b-2_KGreedy_1"
#"leaksn1b-2_KGreedy_2"
#"leaksn1b-2_KGreedy_3"
#"leaksn1b-2_KGreedy_4"
#"leaksn1b-2_KGreedy_5"
#"leaksn1b-3_KGreedy_1"
#"leaksn1b-3_KGreedy_2"
#"leaksn1b-3_KGreedy_3"
#"leaksn1b-3_KGreedy_4"
#"leaksn1b-3_KGreedy_5"
#"leaksn1b-4_KGreedy_1"
#"leaksn1b-4_KGreedy_2"
#"leaksn1b-4_KGreedy_3"
#"leaksn1b-4_KGreedy_4"
#"leaksn1b-4_KGreedy_5"
#"leaksn1b-5_KGreedy_1"
#"leaksn1b-5_KGreedy_2"
#"leaksn1b-5_KGreedy_3"
#"leaksn1b-5_KGreedy_4"
#"leaksn1b-5_KGreedy_5"
#"leaksn1b-1"
#"leaksn1b-2"
#"leaksn1b-3"
"leaksn1b-4"
"leaksn1b-5"
#"leaksn1b-1_KDynamic_1"
#"leaksn1b-1_KDynamic_2"
#"leaksn1b-1_KDynamic_3"
#"leaksn1b-1_KDynamic_4"
#"leaksn1b-1_KDynamic_5"
#"leaksn1b-2_KDynamic_1"
#"leaksn1b-2_KDynamic_2"
#"leaksn1b-2_KDynamic_3"
#"leaksn1b-2_KDynamic_4"
#"leaksn1b-2_KDynamic_5"
#"leaksn1b-3_KDynamic_1"
#"leaksn1b-3_KDynamic_2"
#"leaksn1b-3_KDynamic_3"
#"leaksn1b-3_KDynamic_4"
#"leaksn1b-3_KDynamic_5"
#"leaksn1b-4_KDynamic_1"
#"leaksn1b-4_KDynamic_2"
#"leaksn1b-4_KDynamic_3"
#"leaksn1b-4_KDynamic_4"
#"leaksn1b-4_KDynamic_5"
#"leaksn1b-5_KDynamic_1"
#"leaksn1b-5_KDynamic_2"
#"leaksn1b-5_KDynamic_3"
#"leaksn1b-5_KDynamic_4"
#"leaksn1b-5_KDynamic_5"
)

run_counter=0
total_number_subjects=${#subjects[@]}
total_number_experiments=$(( $total_number_subjects ))

# Run fuzzing
for (( i=0; i<=$(( $total_number_subjects - 1 )); i++ ))
do

  # Evaluate run
  #python3 evaluate_plain.py ${workingPath}/${subjects[i]}/fuzzer-out- $number_of_runs $time_bound $step_size_eval
  #python3 evaluate_plain.py ${workingPath}/${subjects[i]}/fuzzer-out- $number_of_runs $time_bound 1
  #python3 evaluate.py ${workingPath}/${subjects[i]}/fuzzer-out- $number_of_runs $time_bound 30

  #python3 evaluate_seed.py ${workingPath} ${subjects[i]} $number_of_seeds $number_of_runs $time_bound 1
  #python3 evaluate_seed.py ${workingPath} ${subjects[i]} $number_of_seeds $number_of_runs $time_bound $step_size_eval

  #python3 evaluate_seed.py ${workingPath} ${subjects[i]}_KGreedy $number_of_seeds $number_of_runs $time_bound 1
  #python3 evaluate_seed.py ${workingPath} ${subjects[i]}_KGreedy $number_of_seeds $number_of_runs $time_bound $step_size_eval
  python3 evaluate_seed.py ${workingPath} ${subjects[i]}_KDynamic $number_of_seeds $number_of_runs $time_bound 1
  python3 evaluate_seed.py ${workingPath} ${subjects[i]}_KDynamic $number_of_seeds $number_of_runs $time_bound $step_size_eval
  python3 generate_plot_seed.py ${workingPath} ${subjects[i]} $number_of_seeds $number_of_runs $time_bound $step_size_eval .

done
